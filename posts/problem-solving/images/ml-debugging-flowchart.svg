<svg viewBox="0 0 1100 900" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="1100" height="900" fill="#f8f9fa"/>
  
  <!-- Title -->
  <text x="550" y="30" text-anchor="middle" font-size="20" font-weight="bold" fill="#2c3e50">Systematic ML Debugging: Decision Tree</text>
  <text x="550" y="55" text-anchor="middle" font-size="14" fill="#7f8c8d">When Your Model Won't Learn - A Step-by-Step Guide</text>
  
  <!-- Start -->
  <ellipse cx="550" cy="110" rx="100" ry="35" fill="#e94b3c" opacity="0.9"/>
  <text x="550" y="110" text-anchor="middle" font-size="13" font-weight="bold" fill="white">Model Not Learning</text>
  <text x="550" y="125" text-anchor="middle" font-size="11" fill="white">Loss not decreasing</text>
  
  <!-- Arrow markers -->
  <defs>
    <marker id="arrow-debug" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#7f8c8d"/>
    </marker>
  </defs>
  
  <!-- First decision -->
  <path d="M 550 145 L 550 190" stroke="#7f8c8d" stroke-width="2" marker-end="url(#arrow-debug)"/>
  
  <rect x="430" y="200" width="240" height="60" fill="#3498db" opacity="0.85" rx="8"/>
  <text x="550" y="220" text-anchor="middle" font-size="12" font-weight="bold" fill="white">Can it overfit 10 examples?</text>
  <text x="550" y="238" text-anchor="middle" font-size="10" fill="white">Train on tiny batch until</text>
  <text x="550" y="252" text-anchor="middle" font-size="10" fill="white">loss ≈ 0 for 1000 epochs</text>
  
  <!-- Branch: Yes - capacity is fine -->
  <path d="M 670 230 L 800 230" stroke="#27ae60" stroke-width="3"/>
  <text x="735" y="220" text-anchor="middle" font-size="11" font-weight="bold" fill="#27ae60">YES</text>
  
  <rect x="810" y="200" width="260" height="60" fill="#27ae60" opacity="0.2" rx="8" stroke="#27ae60" stroke-width="2"/>
  <text x="940" y="220" text-anchor="middle" font-size="11" font-weight="bold" fill="#196f3d">✓ Model has capacity</text>
  <text x="940" y="238" text-anchor="middle" font-size="10" fill="#2c3e50">Problem is with data or</text>
  <text x="940" y="252" text-anchor="middle" font-size="10" fill="#2c3e50">training setup</text>
  
  <!-- Branch: No - capacity problem -->
  <path d="M 430 230 L 300 230" stroke="#e74c3c" stroke-width="3"/>
  <text x="365" y="220" text-anchor="middle" font-size="11" font-weight="bold" fill="#e74c3c">NO</text>
  
  <rect x="30" y="200" width="260" height="60" fill="#e74c3c" opacity="0.2" rx="8" stroke="#e74c3c" stroke-width="2"/>
  <text x="160" y="220" text-anchor="middle" font-size="11" font-weight="bold" fill="#c0392b">✗ Capacity problem</text>
  <text x="160" y="238" text-anchor="middle" font-size="10" fill="#2c3e50">Architecture or implementation</text>
  <text x="160" y="252" text-anchor="middle" font-size="10" fill="#2c3e50">bug</text>
  
  <!-- No branch expanded -->
  <path d="M 160 260 L 160 310" stroke="#7f8c8d" stroke-width="2" marker-end="url(#arrow-debug)"/>
  
  <rect x="40" y="320" width="240" height="80" fill="#fff3cd" stroke="#f39c12" stroke-width="2" rx="8"/>
  <text x="160" y="340" text-anchor="middle" font-size="11" font-weight="bold" fill="#856404">Check for bugs:</text>
  <text x="50" y="360" font-size="9" fill="#2c3e50">• Wrong loss function?</text>
  <text x="50" y="375" font-size="9" fill="#2c3e50">• Dead neurons (check activations)?</text>
  <text x="50" y="390" font-size="9" fill="#2c3e50">• Gradient flow broken (check grads)?</text>
  
  <!-- Yes branch expanded -->
  <path d="M 940 260 L 940 310" stroke="#7f8c8d" stroke-width="2" marker-end="url(#arrow-debug)"/>
  
  <rect x="820" y="320" width="240" height="60" fill="#3498db" opacity="0.85" rx="8"/>
  <text x="940" y="340" text-anchor="middle" font-size="12" font-weight="bold" fill="white">Check your data:</text>
  <text x="940" y="358" text-anchor="middle" font-size="10" fill="white">Are labels correct?</text>
  <text x="940" y="372" text-anchor="middle" font-size="10" fill="white">Any data leakage?</text>
  
  <!-- Data check branches -->
  <path d="M 880 380 L 720 440" stroke="#e74c3c" stroke-width="2"/>
  <text x="780" y="410" text-anchor="middle" font-size="10" font-weight="bold" fill="#e74c3c">Bad Data</text>
  
  <rect x="600" y="450" width="240" height="70" fill="#e74c3c" opacity="0.2" rx="8" stroke="#e74c3c" stroke-width="2"/>
  <text x="720" y="472" text-anchor="middle" font-size="11" font-weight="bold" fill="#c0392b">Data Issues Found</text>
  <text x="610" y="492" font-size="9" fill="#2c3e50">• Fix label noise</text>
  <text x="610" y="505" font-size="9" fill="#2c3e50">• Remove leaked features</text>
  <text x="610" y="518" font-size="9" fill="#2c3e50">• Fix preprocessing</text>
  
  <path d="M 1000 380 L 1000 440" stroke="#27ae60" stroke-width="2" marker-end="url(#arrow-debug)"/>
  <text x="1010" y="410" text-anchor="middle" font-size="10" font-weight="bold" fill="#27ae60">Data OK</text>
  
  <!-- Training setup check -->
  <rect x="880" y="450" width="240" height="60" fill="#3498db" opacity="0.85" rx="8"/>
  <text x="1000" y="470" text-anchor="middle" font-size="12" font-weight="bold" fill="white">Check training setup:</text>
  <text x="1000" y="488" text-anchor="middle" font-size="10" fill="white">Learning rate? Batch size?</text>
  <text x="1000" y="502" text-anchor="middle" font-size="10" fill="white">Optimizer? Normalization?</text>
  
  <!-- LR branches -->
  <path d="M 940 510 L 800 570" stroke="#e74c3c" stroke-width="2"/>
  <text x="860" y="540" text-anchor="middle" font-size="10" fill="#e74c3c">LR too high</text>
  
  <rect x="680" y="580" width="240" height="50" fill="#fff9e6" stroke="#f39c12" stroke-width="2" rx="8"/>
  <text x="800" y="600" text-anchor="middle" font-size="10" fill="#856404">Loss explodes or oscillates</text>
  <text x="800" y="616" text-anchor="middle" font-size="9" fill="#7f8c8d">→ Reduce LR by 10x, try again</text>
  
  <path d="M 1060 510 L 1060 570" stroke="#e74c3c" stroke-width="2" marker-end="url(#arrow-debug)"/>
  <text x="1070" y="540" text-anchor="middle" font-size="10" fill="#e74c3c">LR too low</text>
  
  <rect x="940" y="580" width="240" height="50" fill="#fff9e6" stroke="#f39c12" stroke-width="2" rx="8"/>
  <text x="1060" y="600" text-anchor="middle" font-size="10" fill="#856404">Loss barely moves</text>
  <text x="1060" y="616" text-anchor="middle" font-size="9" fill="#7f8c8d">→ Increase LR, add warmup</text>
  
  <!-- Advanced debugging -->
  <path d="M 550 260 L 550 680" stroke="#7f8c8d" stroke-width="2" marker-end="url(#arrow-debug)"/>
  
  <rect x="380" y="690" width="340" height="70" fill="#9b59b6" opacity="0.85" rx="8"/>
  <text x="550" y="712" text-anchor="middle" font-size="12" font-weight="bold" fill="white">Still stuck? Advanced debugging:</text>
  <text x="390" y="732" font-size="10" fill="white">1. Check gradient magnitudes (should be ~0.001-0.1)</text>
  <text x="390" y="747" font-size="10" fill="white">2. Visualize activations (looking for saturation)</text>
  
  <!-- Error analysis -->
  <path d="M 550 760 L 550 800" stroke="#7f8c8d" stroke-width="2" marker-end="url(#arrow-debug)"/>
  
  <rect x="380" y="810" width="340" height="70" fill="#16a085" opacity="0.85" rx="8"/>
  <text x="550" y="832" text-anchor="middle" font-size="12" font-weight="bold" fill="white">Model learning but plateaued?</text>
  <text x="390" y="852" font-size="10" fill="white">→ Do error analysis: WHERE and WHY does it fail?</text>
  <text x="390" y="867" font-size="10" fill="white">→ May need: more data, better features, or different approach</text>
  
  <!-- Side panel: Quick fixes -->
  <rect x="20" y="450" width="260" height="220" fill="#e8f4f8" stroke="#3498db" stroke-width="2" rx="8"/>
  <text x="150" y="475" text-anchor="middle" font-size="12" font-weight="bold" fill="#2c3e50">Quick Fixes Checklist:</text>
  
  <text x="30" y="500" font-size="10" fill="#2c3e50" font-weight="bold">If loss = NaN:</text>
  <text x="35" y="515" font-size="9" fill="#7f8c8d">• Learning rate too high</text>
  <text x="35" y="528" font-size="9" fill="#7f8c8d">• Numerical instability (add eps=1e-8)</text>
  
  <text x="30" y="548" font-size="10" fill="#2c3e50" font-weight="bold">If loss oscillates wildly:</text>
  <text x="35" y="563" font-size="9" fill="#7f8c8d">• Batch size too small</text>
  <text x="35" y="576" font-size="9" fill="#7f8c8d">• No learning rate decay</text>
  
  <text x="30" y="596" font-size="10" fill="#2c3e50" font-weight="bold">If validation ≫ training loss:</text>
  <text x="35" y="611" font-size="9" fill="#7f8c8d">• Overfitting (add regularization)</text>
  <text x="35" y="624" font-size="9" fill="#7f8c8d">• Train/val preprocessing mismatch</text>
  
  <text x="30" y="644" font-size="10" fill="#2c3e50" font-weight="bold">If accuracy = random:</text>
  <text x="35" y="659" font-size="9" fill="#7f8c8d">• Check label-feature alignment</text>
  
  <!-- Legend -->
  <rect x="20" y="710" width="260" height="85" fill="white" stroke="#bdc3c7" stroke-width="2" rx="5"/>
  <text x="150" y="730" text-anchor="middle" font-size="11" font-weight="bold" fill="#2c3e50">Decision Path Guide:</text>
  <line x1="30" y1="745" x2="60" y2="745" stroke="#27ae60" stroke-width="3"/>
  <text x="70" y="749" font-size="9" fill="#2c3e50">Good sign - continue this path</text>
  <line x1="30" y1="765" x2="60" y2="765" stroke="#e74c3c" stroke-width="3"/>
  <text x="70" y="769" font-size="9" fill="#2c3e50">Problem found - fix this</text>
  <line x1="30" y1="785" x2="60" y2="785" stroke="#7f8c8d" stroke-width="2" marker-end="url(#arrow-debug)"/>
  <text x="70" y="789" font-size="9" fill="#2c3e50">Continue investigating</text>
</svg>

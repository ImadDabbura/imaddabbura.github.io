<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Imad Dabbura">
<meta name="dcterms.date" content="2023-12-22">

<title>Imad Dabbura - Git from the Inside Out</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<script src="../../site_libs/quarto-search/autocomplete-preset-algolia.umd.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../images/profile-pic.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "algolia": {
    "application-id": "PVDXB8B7OS",
    "search-only-api-key": "eb3007c200831c30465f8a5172690cf0",
    "index-name": "Initial-Website-Search-Index",
    "analytics-events": true,
    "show-logo": true,
    "libDir": "site_libs"
  },
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdn.jsdelivr.net/npm/algoliasearch@4.5.1/dist/algoliasearch-lite.umd.js"></script>


<script type="text/javascript">
var ALGOLIA_INSIGHTS_SRC = "https://cdn.jsdelivr.net/npm/search-insights/dist/search-insights.iife.min.js";
!function(e,a,t,n,s,i,c){e.AlgoliaAnalyticsObject=s,e[s]=e[s]||function(){
(e[s].queue=e[s].queue||[]).push(arguments)},i=a.createElement(t),c=a.getElementsByTagName(t)[0],
i.async=1,i.src=n,c.parentNode.insertBefore(i,c)
}(window,document,"script",ALGOLIA_INSIGHTS_SRC,"aa");
</script>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@algolia/autocomplete-plugin-algolia-insights">

</script>

<script type="text/javascript">

(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-127825273-1', 'auto');

ga('send', {
  hitType: 'pageview',
  'anonymizeIp': true,
});
</script>
<style>

      .quarto-title-block .quarto-title-banner {
        background-image: url(git.jpeg);
background-size: cover;
      }
</style>


<link rel="stylesheet" href="../../assets/posts.css">
<meta property="og:title" content="Imad Dabbura - Git from the Inside Out">
<meta property="og:description" content="An in-depth guide to Git’s object model, branching mechanics, and the hidden workflows that make it so powerful">
<meta property="og:image" content="https://imaddabbura.github.io/posts/git/git.jpeg">
<meta property="og:site_name" content="Imad Dabbura">
<meta name="twitter:title" content="Imad Dabbura - Git from the Inside Out">
<meta name="twitter:description" content="An in-depth guide to Git’s object model, branching mechanics, and the hidden workflows that make it so powerful">
<meta name="twitter:image" content="https://imaddabbura.github.io/posts/git/git.jpeg">
<meta name="twitter:creator" content="@imaddabbura">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../images/profile-pic.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Imad Dabbura</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">Imad Dabbura</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Posts</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../til.html"> <i class="bi bi-lightbulb" role="img">
</i> 
<span class="menu-text">TIL</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../papers-summaries.html"> 
<span class="menu-text">Papers’ Summaries</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../dl-tips-tricks.html"> 
<span class="menu-text">DL Tips &amp; Tricks</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../projects-index.html"> 
<span class="menu-text">Projects</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-more" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">More</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-more">    
        <li>
    <a class="dropdown-item" href="../../books-summaries.html">
 <span class="dropdown-text">Books’ Summaries</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../reading-list.html">
 <span class="dropdown-text">Reading List</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../resume.html">
 <span class="dropdown-text">Resume</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../misc-notes.html">
 <span class="dropdown-text">Misc. Notes</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/imaddabbura"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/imadphd"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Git from the Inside Out</h1>
            <p class="subtitle lead">An in-depth guide to Git’s object model, branching mechanics, and the hidden workflows that make it so powerful</p>
                                <div class="quarto-categories">
                <div class="quarto-category">SWE</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Imad Dabbura </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">December 22, 2023</p>
      </div>
    </div>
    
      <div>
      <div class="quarto-title-meta-heading">Modified</div>
      <div class="quarto-title-meta-contents">
        <p class="date-modified">December 22, 2023</p>
      </div>
    </div>
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#git-object-model" id="toc-git-object-model" class="nav-link" data-scroll-target="#git-object-model">Git Object Model</a>
  <ul class="collapse">
  <li><a href="#blobs" id="toc-blobs" class="nav-link" data-scroll-target="#blobs">Blobs</a></li>
  <li><a href="#trees" id="toc-trees" class="nav-link" data-scroll-target="#trees">Trees</a></li>
  <li><a href="#commits" id="toc-commits" class="nav-link" data-scroll-target="#commits">Commits</a></li>
  <li><a href="#section" id="toc-section" class="nav-link" data-scroll-target="#section"></a></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary">Summary</a></li>
  </ul></li>
  <li><a href="#branches" id="toc-branches" class="nav-link" data-scroll-target="#branches">Branches</a></li>
  <li><a href="#remote-branches" id="toc-remote-branches" class="nav-link" data-scroll-target="#remote-branches">Remote Branches</a></li>
  <li><a href="#tags" id="toc-tags" class="nav-link" data-scroll-target="#tags">Tags</a></li>
  <li><a href="#cloning-repository" id="toc-cloning-repository" class="nav-link" data-scroll-target="#cloning-repository">Cloning Repository</a></li>
  <li><a href="#ignoring-files" id="toc-ignoring-files" class="nav-link" data-scroll-target="#ignoring-files">Ignoring Files</a></li>
  <li><a href="#general" id="toc-general" class="nav-link" data-scroll-target="#general">General</a></li>
  <li><a href="#stashing" id="toc-stashing" class="nav-link" data-scroll-target="#stashing">Stashing</a></li>
  <li><a href="#managing-history" id="toc-managing-history" class="nav-link" data-scroll-target="#managing-history">Managing History</a></li>
  <li><a href="#bisect" id="toc-bisect" class="nav-link" data-scroll-target="#bisect">Bisect</a></li>
  <li><a href="#submodules" id="toc-submodules" class="nav-link" data-scroll-target="#submodules">Submodules</a></li>
  <li><a href="#hooks" id="toc-hooks" class="nav-link" data-scroll-target="#hooks">Hooks</a></li>
  <li><a href="#resetting" id="toc-resetting" class="nav-link" data-scroll-target="#resetting">Resetting</a></li>
  <li><a href="#inspecting-commit-ranges" id="toc-inspecting-commit-ranges" class="nav-link" data-scroll-target="#inspecting-commit-ranges">Inspecting Commit Ranges</a></li>
  <li><a href="#grep" id="toc-grep" class="nav-link" data-scroll-target="#grep">Grep</a></li>
  <li><a href="#undoing" id="toc-undoing" class="nav-link" data-scroll-target="#undoing">Undoing</a></li>
  <li><a href="#rebasing-history" id="toc-rebasing-history" class="nav-link" data-scroll-target="#rebasing-history">Rebasing History</a></li>
  <li><a href="#packfiles" id="toc-packfiles" class="nav-link" data-scroll-target="#packfiles">Packfiles</a></li>
  <li><a href="#github-and-remotes" id="toc-github-and-remotes" class="nav-link" data-scroll-target="#github-and-remotes">Github and Remotes</a></li>
  <li><a href="#typical-workflow" id="toc-typical-workflow" class="nav-link" data-scroll-target="#typical-workflow">Typical Workflow</a></li>
  <li><a href="#configuration" id="toc-configuration" class="nav-link" data-scroll-target="#configuration">Configuration</a></li>
  <li><a href="#resources" id="toc-resources" class="nav-link" data-scroll-target="#resources">Resources</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/imaddabbura/imaddabbura.github.io/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p><img src="git.jpeg" align="center" height="500px" width="800px"></p>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p><strong>Git</strong> is a distributed version control system that thinks/stores its data as a series of snapshots (not delta). Each commit is a snapshot for the state of the system at the time of the commit. For files that haven’t changed, <em>Git</em> doesn’t store the file again but uses a pointer to the previous identical file that it stored before. It also lets us do almost all operations locally.</p>
<p>Everything in <em>Git</em> is checksummed before it is stored in its object store using <code>SHA-1</code> hash. <code>SHA-1</code> hash returns 40 hexadecimal characters. All objects are referred to by their checksummed because <em>Git</em> is content addressable filesystem. This means that Git notice any changes to the files it tracks by comparing the checksummed of the stored version vs the current version.</p>
<p>All actions in <em>Git</em> only add data to the object store (Git database). Therefore, it is almost impossible to not undo any operation especially if we regularly push our Git database to other repository such as <em>Github</em>.</p>
<p>Git has three states:</p>
<ul>
<li><strong>Modified</strong>: file changed but not yet committed.</li>
<li><strong>Staged</strong>: marked changed file to go to next commit snapshot. Staging area is a single file that is typically called “index”, which stores information about what will go into our next commit snapshot. When we run <code>git add file</code>, Git does the following:
<ul>
<li>Computes checksum of the file and store the SHA-1 value in index file</li>
<li>Compress the contents of the file and store it in <code>.git</code> directory under <code>objects</code> where the first two characters of the checkum would be the name of the directory and the next 38 characters would be the name of the file</li>
<li>Add the checksum to the index file (staging area)</li>
</ul></li>
<li><strong>Committed</strong>: store data (snapshot) in the database. The snapshot is represented as tree for root directory of the Git project. When we run <code>git commit</code>, Git does the following:
<ul>
<li>It computes checksum of each subdirectory until we end up with the root directory.</li>
<li>Stores them as tree objects in Git repository</li>
<li>Finally, Git create a commit object and store it in the Git repository with the following metadata:
<ul>
<li>Date</li>
<li>Author name</li>
<li>Committer name</li>
<li>Commit message</li>
<li>Parent(s) commit. First commit would have no parents. Following commits may have 1 parent or more parents in the case of merges</li>
<li>Pointer to the root project tree</li>
</ul></li>
</ul></li>
</ul>
<p><code>.git</code> directory which is at the root directory of the project has all the metadata for Git project such as the database (object store).</p>
<p>Files can be in two states:</p>
<ul>
<li><strong>UnTracked</strong>: files that Git doesn’t know about. They are files that are neither in any snapshot nor in staging area. Therefore, they don’t have modified/unmodified states.</li>
<li><strong>Tracked</strong>: files that were in last snapshot or in staging area. They have all states mentioned above.</li>
</ul>
</section>
<section id="git-object-model" class="level2">
<h2 class="anchored" data-anchor-id="git-object-model">Git Object Model</h2>
<ul>
<li>Git stores everything in <strong>.git</strong> directory. So deleting this directory will basically delete the whole history and can’t be recovered.</li>
<li>Git stores all of its representations using <strong>objects</strong> directory. Object can be: blob or tree or commit.</li>
<li>Git use <strong>sha1sum</strong> to get the hash value of each object. It is 40 hexadecimal characters (160 bits).
<ul>
<li>Git uses the first two characters for the name of directory for the object and the other 38 characters for the object itself.</li>
<li>Git stores objects based on their hash values (content addressable storage).</li>
<li>Git compresses the contents using zlib</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">// a file is a bunch of bytes</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>type object <span class="op">=</span> blob <span class="op">|</span> tree <span class="op">|</span> commit</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>objects <span class="op">=</span> map<span class="op">&lt;</span>sha1sum<span class="op">(</span>object<span class="op">),</span> object<span class="op">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> store(obj):</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="bu">id</span> <span class="op">=</span> sha1sum(obj)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  objects[<span class="bu">id</span>] <span class="op">=</span> obj</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="op">//</span> a directory contains named files <span class="kw">and</span> directories</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span> tree <span class="op">=</span> <span class="bu">map</span><span class="op">&lt;</span>string, tree <span class="op">|</span> <span class="bu">file</span><span class="op">&gt;</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> load(<span class="bu">id</span>):</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> objects[<span class="bu">id</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ul>
<div id="cell-6" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>ls <span class="op">-</span>al ..<span class="op">/</span>..<span class="op">/</span>.git</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>total 48
drwxr-xr-x  15 imad  staff   480 Nov  5 09:08 .
drwxr-xr-x@ 12 imad  staff   384 Nov  5 06:56 ..
-rw-r--r--   1 imad  staff    15 Mar 17  2020 COMMIT_EDITMSG
-rw-r--r--   1 imad  staff    23 Feb 12  2020 HEAD
drwxr-xr-x   2 imad  staff    64 Feb 12  2020 branches
-rw-r--r--   1 imad  staff   455 Mar 17  2020 config
-rw-r--r--   1 imad  staff    73 Feb 12  2020 description
drwxr-xr-x  13 imad  staff   416 Feb 12  2020 hooks
-rw-r--r--   1 imad  staff  3913 Nov  5 09:08 index
drwxr-xr-x   3 imad  staff    96 Feb 12  2020 info
drwxr-xr-x   4 imad  staff   128 Feb 12  2020 logs
drwxr-xr-x   3 imad  staff    96 Mar 17  2020 modules
drwxr-xr-x  94 imad  staff  3008 Mar 17  2020 objects
-rw-r--r--   1 imad  staff   114 Feb 12  2020 packed-refs
drwxr-xr-x   5 imad  staff   160 Feb 12  2020 refs</code></pre>
</div>
</div>
<div id="cell-7" class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>ls <span class="op">-</span>a ..<span class="op">/</span>..<span class="op">/</span>.git<span class="op">/</span>objects</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>.    0c   1a   26   37   43   50   62   72   8b   9e   b1   c5   d1   e0   fc
..   0f   1d   29   38   45   52   63   73   8e   a2   b2   c7   d2   e1   ff
00   12   1f   2a   39   49   58   64   75   91   a5   b3   ca   d3   eb   info
03   13   20   2b   3f   4a   5a   67   77   96   a9   b4   cc   d8   ee   pack
07   17   21   2c   40   4b   5f   68   7f   98   aa   b6   ce   dc   f0
08   19   22   33   42   4d   61   6f   8a   9d   b0   b8   d0   dd   f8</code></pre>
</div>
</div>
<div id="cell-8" class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>ls <span class="op">-</span>Ral ..<span class="op">/</span>..<span class="op">/</span>.git<span class="op">/</span>objects<span class="op">/</span>ee</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>total 8
drwxr-xr-x   3 imad  staff    96 Mar  4  2020 .
drwxr-xr-x  94 imad  staff  3008 Mar 17  2020 ..
-r--r--r--   1 imad  staff   166 Mar  4  2020 5941ab3c125a3a669370d96cd5cb8496f8acde</code></pre>
</div>
</div>
<div id="cell-9" class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>git cat<span class="op">-</span><span class="bu">file</span> <span class="op">-</span>p ee5941ab3c125a3a669370d96cd5cb8496f8acde</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>100644 blob b6e47617de110dea7ca47e087ff1347cc2646eda    .gitignore
100644 blob 261eeb9e9f8b2b4b0d119366dda99c6fd7d35c64    LICENSE
100644 blob 58da9de606d62625c379fea5ca020d19d958fb18    README.md
040000 tree 6fea6c3802fd1cf83bf19bfc2302da6b79638ab5    missing-cs-semester</code></pre>
</div>
</div>
<section id="blobs" class="level3">
<h3 class="anchored" data-anchor-id="blobs">Blobs</h3>
<ul>
<li><code>blobs</code> are binary large objects which stores only the context of the file; not its name (array of bytes).</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>type blob <span class="op">=</span> array<span class="op">&lt;</span>byte<span class="op">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>The type of file which is “blob”, the number of characters in it, the separator character, and the actual content are passed to the sha1sum to get the hash value.</li>
<li>Since Git does not store the name of the file or any of its metadata, if you have two files with the same content then Git only stores it once.</li>
</ul>
<div id="cell-12" class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>git cat<span class="op">-</span><span class="bu">file</span> <span class="op">-</span>p <span class="dv">58</span><span class="er">da9de606d62625c379fea5ca020d19d958fb18</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># software-engineering
Materials for software engineering.</code></pre>
</div>
</div>
<div id="cell-13" class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>wc ..<span class="op">/</span>..<span class="op">/</span>README.md</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       2       6      59 ../../README.md</code></pre>
</div>
</div>
<div id="cell-14" class="cell" data-execution_count="68">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>bash</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>cat <span class="op">&lt;</span>(echo <span class="op">-</span>e <span class="st">"blob 60</span><span class="ch">\0</span><span class="st">"</span>) ..<span class="op">/</span>..<span class="op">/</span>README.md</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>blob 60
# software-engineering
Materials for software engineering.</code></pre>
</div>
</div>
<div id="cell-15" class="cell" data-execution_count="75">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># # Since todo.md and todo2.md are identical, Git saves ONLY one copy</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 100644 blob b3dfa8b0b7c73f2c7156dfc69c737d05f2f900c3    file.txt</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 100644 blob c1ee9d5404109b66f21fa193da635aa8c4f04c47    todo.md</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 100644 blob c1ee9d5404109b66f21fa193da635aa8c4f04c47    todo2.md</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-16" class="cell" data-execution_count="66">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>bash</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>cat <span class="op">&lt;</span>(echo <span class="op">-</span>e <span class="st">"blob 58</span><span class="ch">\0</span><span class="st">"</span>) ..<span class="op">/</span>..<span class="op">/</span>README.md <span class="op">|</span> shasum</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>5ee782528aa7bc3d388c33339962f6fce514b39e  -</code></pre>
</div>
</div>
</section>
<section id="trees" class="level3">
<h3 class="anchored" data-anchor-id="trees">Trees</h3>
<ul>
<li>Tree is a recursive data structure that contains other trees/blobs; i.e.&nbsp;it contains a list of pointers to other trees/blobs. In this context, tree is a directory. Therefore, the root directory is the main directory that has .git as its subdirectory. Each line in the tree object’s file contains a pointer (the object’s hash) to one such object (tree or blob), while also providing the mode, object type, and a name for the file or directory.</li>
</ul>
<div class="sourceCode" id="cb21"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co">// a directory contains named files and directories</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>type tree <span class="op">=</span> map<span class="op">&lt;</span>sha1sum<span class="op">(</span>tree <span class="op">|</span> file<span class="op">),</span> tree <span class="op">|</span> file<span class="op">&gt;;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>It maps strings (hash values) to objects. So if a directory is empty, Git does not add it as untracked change until we add a file or a directory to it because empty directory has nothing to map stuff to. Therefore, to track empty directories, we can add <code>.gitkeep</code> to the directory if it is empty to be able to track it.</li>
<li>We pass all objects (not their contents) to get the hash value.</li>
<li>Tree objects themselves do not have names, much like blobs. Parent trees associate names for subtrees, and the root tree, referred to as the “working tree” of a repository, in fact has no name. This has two fun characteristics:
<ul>
<li>The repo doesn’t care what you call it. You can rename your local directory that contains your repository to anything you’d like. Git is blissfully unaware of the name of the directory that contains the .git repo directory.</li>
<li>We can rename subtrees as much as we want, and only parent objects need to update. The subtree object itself and everything below remain untouched.</li>
</ul></li>
<li>Trees summary:
<ul>
<li>Trees list out the contents of a directory (blobs and subtrees)</li>
<li>For each object, the mode, permissions, type, hash, and name is listed</li>
<li>Tree objects must contain at least one blob or tree; otherwise, it won’t be tracked</li>
<li>Trees can be nested to any depth</li>
<li>Trees, like blobs, don’t store names. The names are stored in parent trees. Therefore, changing names of subtrees only change the names in the parent tree. Therefore, since root directory has no parent, changing its name doesn’t have any effect on git</li>
<li>Trees are named and stored in the objects directory by hashing their contents (the list of objects described above)</li>
</ul></li>
</ul>
<div id="cell-19" class="cell" data-execution_count="78">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># master is a branch that points to a commit which also points to a tree</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>git ls<span class="op">-</span>tree master</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>100644 blob ced9612a7d927cdb23d0ba2de47679504b0c9fc3    Command-Line-Environment.ipynb
100644 blob 68fe60e479d316b7f40f194a8d3400e7f5c8af60    Data-Wrangling.ipynb
100644 blob dcee12ed0ae6096339dc40a70c5ff67a2afdec31    Debugging-And-Profiling.ipynb
100644 blob 40582a6d5d23028acc251c54f6e124ce9f2ec5ba    Petpouri.ipynb
100644 blob 6405b8d2b26e17020b12f98639148615d6c9baea    Plan.ipynb
100644 blob f0aca55804924d43eb3d687ebc9a780f3b8baff3    Security-And-Cryptography.ipynb
100644 blob 035f52d11f6126cac575b899f6ff0011060aeddd    Shell-Scripting.ipynb
100644 blob a2235c5c9a32920e7f15c3bf63afde41e60c4e52    Version-Control(Git).ipynb
100644 blob 395d086c29d15560f0b3eee28c0489afe1b6de8e    Vim-Tutor-Summaries.ipynb
100644 blob 9d756b15f398735d1bd414fd97afa5f709db06f5    basic.png
100644 blob 50daf1bb695821f251fbc44880413ca17ca8a8b6    commit_history.png
100644 blob 43d8b8f1031c6c81f0153e0616be7576de6401f9    pycallgraph.png
100644 blob 5a0fa1a6cb3918e9c2d316433edfd5ccd275bd59    vim-tutorial.md</code></pre>
</div>
</div>
</section>
<section id="commits" class="level3">
<h3 class="anchored" data-anchor-id="commits">Commits</h3>
</section>
<section id="section" class="level3">
<h3 class="anchored" data-anchor-id="section"></h3>
<ul>
<li><code>commits</code> contain parent, message, author, commiter, and current tree. Therefore, it is a file like any other object.</li>
</ul>
<div class="sourceCode" id="cb24"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co">// a commit has parents, metadata, and the top-level tree</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>type commit <span class="op">=</span> <span class="kw">struct</span> <span class="op">{</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    parent<span class="op">:</span> array<span class="op">&lt;</span>commit<span class="op">&gt;;</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    author<span class="op">:</span> string</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    message<span class="op">:</span> string</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>    snapshot<span class="op">:</span> tree</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>It’s worth noting that the commit object only contains a single reference to a working directory; Git doesn’t store diffs. When diffing between two commits, it compares the working trees of the commits, computing the diff on demand.</li>
</ul>
<p>Git only stores the delta changes between commits and not everything. It also point to blobs/trees that have not been changed using old commits and don’t store them again for new commits. Therefore, if a file has not been changed from previous commit, the hash value for that commit is the same so its address is still the same -&gt; keep the same pointer.</p>
<p><img src="git-objects-simple.png" height="400px" width="300px" align="center"></p>
<p><strong>References</strong> are nothing but pointers to commits. They are stored under <code>.git/refs</code> directory as files where each file contains the hash value of some commit. Since it is a hassle to always refer to objects by their 40 hexadecimal string, we can use references to refer to objects. Contrary to objects, references are mutable. For example, <code>master</code> always refers to the latest commit in the main branch. <code>HEAD</code> refers to where we currently are in the history which will be used when creating new snapshot by making the parent for this commit the <code>HEAD</code> and then update <code>HEAD</code>.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>references <span class="op">=</span> <span class="bu">map</span><span class="op">&lt;</span>string, commit<span class="op">&gt;;</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> update_reference(name, <span class="bu">id</span>):</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    references[name] <span class="op">=</span> <span class="bu">id</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> read_reference(name):</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> references[name]</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> load_reference(name_or_id):</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> name_or_id <span class="kw">in</span> references:</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> load(references[name_or_id])</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> load(name_or_id)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="cell-25" class="cell" data-execution_count="88">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>tree <span class="op">-</span>C <span class="op">-</span>L <span class="dv">1</span> ..<span class="op">/</span>..<span class="op">/</span>.git</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>../../.git
├── COMMIT_EDITMSG
├── HEAD
├── branches
├── config
├── description
├── hooks
├── index
├── info
├── logs
├── modules
├── objects
├── packed-refs
└── refs

7 directories, 6 files</code></pre>
</div>
</div>
<div id="cell-26" class="cell" data-execution_count="89">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>tree <span class="op">-</span>C <span class="op">-</span>L <span class="dv">1</span> ..<span class="op">/</span>..<span class="op">/</span>.git<span class="op">/</span>refs<span class="op">/</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>../../.git/refs/
├── heads
├── remotes
└── tags

3 directories, 0 files</code></pre>
</div>
</div>
<div id="cell-27" class="cell" data-execution_count="90">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>tree <span class="op">-</span>C <span class="op">-</span>L <span class="dv">1</span> ..<span class="op">/</span>..<span class="op">/</span>.git<span class="op">/</span>refs<span class="op">/</span>heads<span class="op">/</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>../../.git/refs/heads/
└── master

0 directories, 1 file</code></pre>
</div>
</div>
<div id="cell-28" class="cell" data-execution_count="91">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>cat ..<span class="op">/</span>..<span class="op">/</span>.git<span class="op">/</span>refs<span class="op">/</span>heads<span class="op">/</span>master</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>e1d95ecb4c02e0c30a8635a37631c523d2041299</code></pre>
</div>
</div>
<div id="cell-29" class="cell" data-execution_count="93">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>git cat<span class="op">-</span><span class="bu">file</span> <span class="op">-</span>t e1d95ecb4c02e0c30a8635a37631c523d2041299</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>commit</code></pre>
</div>
</div>
<div id="cell-30" class="cell" data-execution_count="94">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>git cat<span class="op">-</span><span class="bu">file</span> <span class="op">-</span>p e1d95ecb4c02e0c30a8635a37631c523d2041299</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tree 75407c234b245d258c809de234e030f57dd98148
parent 429137bbf1334dcea2719458bcc3a323cd829ecd
author Imad &lt;imad.dabbura@hotmail.com&gt; 1584462760 -0500
committer Imad &lt;imad.dabbura@hotmail.com&gt; 1584462760 -0500

Review all nbs</code></pre>
</div>
</div>
<p><code>HEAD</code>, unlike the other objects we’ve discussed, is a singleton, meaning that there is only ever one HEAD. It identifies the currently checked out object. Typically, this is a branch (with that branch pointing to a commit), but it is possible to check out a commit directly, in which case HEAD would be pointing at that commit.</p>
<p>HEAD is a file just like our branch objects. It lives at the root of the .git directory and its contents are similarly simple.</p>
<div id="cell-32" class="cell" data-execution_count="114">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>cat <span class="op">/</span>Users<span class="op">/</span>imad<span class="op">/</span>Desktop<span class="op">/</span>git<span class="op">-</span>repo<span class="op">/</span>.git<span class="op">/</span>HEAD</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>ref: refs/heads/master</code></pre>
</div>
</div>
<div id="cell-33" class="cell" data-execution_count="115">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>bash</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>cd <span class="op">~/</span>Desktop<span class="op">/</span>git<span class="op">-</span>repo<span class="op">/</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>git graph2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>* 6e9c688    (HEAD -&gt; master, tag: v.0.1, test) Renaming (Imad)
* ff9e667    Add test1 dir (Imad)
* e503b6e    Add test dir (Imad)
* 8610c78    Add copied file (Imad)
* ed738c9    (feature) Rebased all commits (Imad)
* 2050b90    Add host to file (Imad)
* 91eacf5    Add host (Imad)
* ed27259    patch commit (Imad)
* ff2d260    third commit (Imad)
* 6dd0c14    Change second commit (Imad)
* c2b7166    first commit (Imad)</code></pre>
</div>
</div>
<div id="cell-34" class="cell" data-execution_count="116">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>bash</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>cd <span class="op">~/</span>Desktop<span class="op">/</span>git<span class="op">-</span>repo<span class="op">/</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>git checkout <span class="dv">8610</span><span class="er">c78</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Note: checking out '8610c78'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

  git checkout -b &lt;new-branch-name&gt;

HEAD is now at 8610c78 Add copied file</code></pre>
</div>
</div>
<div id="cell-35" class="cell" data-execution_count="118">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>cat <span class="op">/</span>Users<span class="op">/</span>imad<span class="op">/</span>Desktop<span class="op">/</span>git<span class="op">-</span>repo<span class="op">/</span>.git<span class="op">/</span>HEAD</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>8610c78113fe423b20a9f84d485b49af5ad089b0</code></pre>
</div>
</div>
<div id="cell-36" class="cell" data-execution_count="117">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>bash</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>cd <span class="op">~/</span>Desktop<span class="op">/</span>git<span class="op">-</span>repo<span class="op">/</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>git graph2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>* 6e9c688    (tag: v.0.1, test, master) Renaming (Imad)
* ff9e667    Add test1 dir (Imad)
* e503b6e    Add test dir (Imad)
* 8610c78    (HEAD) Add copied file (Imad)
* ed738c9    (feature) Rebased all commits (Imad)
* 2050b90    Add host to file (Imad)
* 91eacf5    Add host (Imad)
* ed27259    patch commit (Imad)
* ff2d260    third commit (Imad)
* 6dd0c14    Change second commit (Imad)
* c2b7166    first commit (Imad)</code></pre>
</div>
</div>
</section>
<section id="summary" class="level3">
<h3 class="anchored" data-anchor-id="summary">Summary</h3>
<ul>
<li><strong>Objects</strong>: blobs, trees, and commits</li>
<li><strong>Refs</strong>: branches, tags, and remote branches</li>
<li><strong>HEAD</strong>: The single pointer to rule them all</li>
</ul>
<p><img src="git-objects.png" width="500"></p>
</section>
</section>
<section id="branches" class="level2">
<h2 class="anchored" data-anchor-id="branches">Branches</h2>
<ul>
<li><code>heads</code> aka branches (because it is a collection of <code>HEAD</code>s for each branch in Git repo) are nothing but pointers to commits. They are very simple objects, they only contain hash value of the commit they are pointing to. Therefore, creating a branch is just creating a file in <code>refs/heads</code> with the name of the branch that has the commit of the HEAD of that branch. At the beginning, this file will have the commit the HEAD points to from the branch you were on when created the branch.</li>
<li>When you switch branches, Git resets your working directory to look like it did the last time you committed on that branch. It adds, removes, and modifies files automatically to make sure your working copy is what the branch looked like on your last commit.</li>
<li>Merging:
<ul>
<li>If we are merging a feature branch into master branch and the feature branch is directly ahead of master where master’s last commit can be reached following feature branch commit’s history, Git will do fast-forward merge, which means it just updates the pointer to point forward.</li>
<li>Otherwise, if head of master branch isn’t direct ancestor of feature branch, Git does three-way merge by using 3 commits:
<ul>
<li>Common ancestor commit</li>
<li>Last commit from master branch and feature branch</li>
<li>Creates a new snapshot with new commit object (<strong>merge commit</strong>) that points to two parents: last commit from master and last commit from feature branches</li>
</ul></li>
<li>If we have merge conflict, we can either abort the merge or resolve the merge conflist ourselves. Once we resolve the conflicts in all files, we should stage those files and then commit the changes. This would be the merge commit. We can use mergetool to resolve merge conflicts such as <code>vimdiff</code>.</li>
</ul></li>
<li><code>git branch -v</code> will show last commit of all branches</li>
<li><code>git branch --merged</code> show all branches that were merged with the current branch we are on. <code>git branch --merged master</code> show all branches that were merged with master branch.</li>
<li><code>git branch --no-merged</code> does the opposite.</li>
<li>We can’t delete a branch if it has work that we haven’t merged with master branch. We can force delete using <code>-D</code> flag.</li>
<li>We can rename a branch, but we should do it both locally and on the remote server. It is recommended to avoid renaming master branch because it would break integrations/scripts/etc. and requires a lot more work.
<ul>
<li>Locally:
<ul>
<li><code>git branch --move oldname newname</code></li>
</ul></li>
<li>Remote:
<ul>
<li><code>git push --set-upstream origin newname</code></li>
<li><code>git push origin -d oldname</code></li>
</ul></li>
</ul></li>
<li><code>heads</code> are for local branches.</li>
</ul>
</section>
<section id="remote-branches" class="level2">
<h2 class="anchored" data-anchor-id="remote-branches">Remote Branches</h2>
<p><strong>Remote Branches</strong> are the same as local branches. They are again files that point to commits.</p>
<ul>
<li>We can have multiple remotes where each one has its own branches. <code>origin</code> is the (default) main one typically used for the upstream (we can change it to other names when cloning a repo such as <code>git clone URL -o anothername</code>. <code>git remote -v</code> would list all the remotes for the repository. We can add remotes <code>git remote add remote_name remote_url</code></li>
<li>All the remote branches under <code>remotes/origin/</code> will be updated <strong>ONLY</strong> when communicating with the remote server. Such branches act more as bookmarks and can’t be changed by any Git commands to point to different commits directly.</li>
<li>Local branch is called <strong>Tracking Branch</strong> if it tracks a remote branch (called <strong>Upstream Branch</strong>)
<ul>
<li><code>git checkout branchname</code> would create tracking branch that tracks default remotename/branchname if branchname doesn’t exist and exactly matches one upstream branch names.</li>
<li>We can have local branches track branches from different remotes: <code>git checkout -b remotename/remotebranch</code> which would create local branch named remotebranch that tracks remotebranch on remotename server. We can have different name for our local branch as <code>git checkout -b localbranchname remotename/remotebranch</code>.</li>
<li>If we already have a local branch, we can use <code>git branch --set-upstream-to=remotename/remotebranch</code> to make current branch track remotebranch on remotename server</li>
<li>If I am on a tracking branch and run <code>git pull</code>, it knows which server to fetch from and which branch to merge in</li>
</ul></li>
<li><code>git fetch</code> download the changes from all branches from remote to local repository without merging them. We should do the merge ourselves such as <code>git merge origin/branchname</code></li>
<li><code>git pull</code> download and merge the changes from remote to local branches.</li>
<li><code>git remote show remote_name</code> will show everything in details about the <code>remote_name</code> such as URL, local/remote branches, etc.</li>
<li>We can rename/delete remotes as <code>git remote rename/remove remote_name</code>. If we delete remote, it deletes all config/settings related to the deleted remote. Renaming would rename branches.</li>
<li>Remote references are read-only, which means we will never update them using <code>git commit</code> but <em>Git</em> manages them as bookmarks.</li>
<li>By default, <em>Git</em> fetches all references from remote to heads -&gt; All branches. We can change this behavior on the command line when running <code>git fetch remote_name remote_branch:refs/remotes/remote_name/branch_name</code></li>
<li>Pushing local branch to remote can be done in different forms:
<ul>
<li><code>git push origin branchname</code></li>
<li><code>git push origin localbranchname:remotebranchname</code> which lets us have a different name on the remote server for our local branch</li>
</ul></li>
<li>We can delete remote branch <code>git push origin --delete branchname</code></li>
</ul>
<div id="cell-43" class="cell" data-execution_count="108">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>tree <span class="op">-</span>C ..<span class="op">/</span>..<span class="op">/</span>.git<span class="op">/</span>refs<span class="op">/</span>remotes<span class="op">/</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>../../.git/refs/remotes/
└── origin
    ├── HEAD
    └── master

1 directory, 2 files</code></pre>
</div>
</div>
<div id="cell-44" class="cell" data-execution_count="109">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>cat ..<span class="op">/</span>..<span class="op">/</span>.git<span class="op">/</span>refs<span class="op">/</span>remotes<span class="op">/</span>origin<span class="op">/*</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>ref: refs/remotes/origin/master
e1d95ecb4c02e0c30a8635a37631c523d2041299</code></pre>
</div>
</div>
</section>
<section id="tags" class="level2">
<h2 class="anchored" data-anchor-id="tags">Tags</h2>
<ul>
<li><strong>Tags</strong> are like branches, they too point to a commit and stored under <code>.git/refs</code> dir in <code>tags</code> dir. They are basically files that have the commits they are pointing to.</li>
<li>Tags can be created simply by <code>git tag version_no</code>. We can also create more complex tags by adding annotations, PGP signature, and other metadata. In this case, they will be stored in <code>refs/objects</code> dir and the tag will simply be the hash value of the tag object (which will also contain the hash of the commit that was tagged).
<ul>
<li>Annotated tags, however, are stored as full objects in the Git database. They’re checksummed; contain the tagger name, email, and date; have a tagging message; and can be signed and verified with GNU Privacy Guard (GPG). It’s generally recommended that you create annotated tags so you can have all this information.</li>
</ul></li>
<li>We can also tag previous commits by specifying their hash abbreviation: <code>git tag -a v1.0 ca21323</code></li>
<li><code>git push</code> doesn’t transfer tags to remote server, we have to explicityly push tags: <code>git push origin v1.0</code></li>
<li><code>git tag</code> to list all tags</li>
<li><code>git tag -l pattern</code> to look for tags that match specific patters</li>
<li>We can checkout tags to inspect files from that version: <code>git checkout tagname</code>. Any changes that are made and committed wouldn’t belong to any branch and be unreachable unless we use exact commit hash. Therefore, to fix issues, create new branch from tag and do the changes.</li>
<li>The <strong>difference</strong> between tags and branches is that branches evolve over time; however, tags point to fixed commit in repo’s history.</li>
<li>We can delete tags:
<ul>
<li>locally: <code>git tag -d tagname</code></li>
<li>remote: <code>git push remote_name -d tagname</code> OR <code>git push remote_name :refs/tags/tagname</code></li>
</ul></li>
</ul>
<div id="cell-47" class="cell" data-execution_count="96">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>tree <span class="op">-</span>C <span class="op">/</span>Users<span class="op">/</span>imad<span class="op">/</span>Desktop<span class="op">/</span>git<span class="op">-</span>repo<span class="op">/</span>.git<span class="op">/</span>refs<span class="op">/</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>/Users/imad/Desktop/git-repo/.git/refs/
├── heads
│&nbsp;&nbsp; ├── feature
│&nbsp;&nbsp; ├── master
│&nbsp;&nbsp; └── test
└── tags
    └── v.0.1

2 directories, 4 files</code></pre>
</div>
</div>
<div id="cell-48" class="cell" data-execution_count="97">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>cat <span class="op">/</span>Users<span class="op">/</span>imad<span class="op">/</span>Desktop<span class="op">/</span>git<span class="op">-</span>repo<span class="op">/</span>.git<span class="op">/</span>refs<span class="op">/</span>tags<span class="op">/*</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>6e9c6886a2180fdfde291a130aa9e10a52bac679</code></pre>
</div>
</div>
<div id="cell-49" class="cell" data-execution_count="100">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>bash</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>cd <span class="op">~/</span>Desktop<span class="op">/</span>git<span class="op">-</span>repo<span class="op">/</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>git graph2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>* 6e9c688    (HEAD -&gt; master, tag: v.0.1, test) Renaming (Imad)
* ff9e667    Add test1 dir (Imad)
* e503b6e    Add test dir (Imad)
* 8610c78    Add copied file (Imad)
* ed738c9    (feature) Rebased all commits (Imad)
* 2050b90    Add host to file (Imad)
* 91eacf5    Add host (Imad)
* ed27259    patch commit (Imad)
* ff2d260    third commit (Imad)
* 6dd0c14    Change second commit (Imad)
* c2b7166    first commit (Imad)</code></pre>
</div>
</div>
</section>
<section id="cloning-repository" class="level2">
<h2 class="anchored" data-anchor-id="cloning-repository">Cloning Repository</h2>
<p><code>git clone https://github.com/UserName/RepoName</code> would do the following:</p>
<ul>
<li>Create a directory called <code>RepoName</code></li>
<li>Create a directory called <code>.git</code> inside <code>RepoName</code></li>
<li>Pull down all versions for every file for the history of the project</li>
<li>Check out the latest version</li>
</ul>
<p>As a result, if initially a huge file was committed but then deleted years ago, cloning will pull down the huge file even if such file is never needed again. Therefore, if a project has a long history, we may not need to clone all history and restrict to last <code>N</code> days.</p>
</section>
<section id="ignoring-files" class="level2">
<h2 class="anchored" data-anchor-id="ignoring-files">Ignoring Files</h2>
<p><code>.gitignore</code> hosts all patterns that Git should ignore and not track. It is typically located at the root directory of the project and applies recursively to all subsdirectories; however, we can have <code>.gitignore</code> in subdirectories that only gets applied specifically to those subdirectories.</p>
<p>The rules for the patterns you can put in the .gitignore file are as follows:</p>
<ul>
<li>Blank lines or lines starting with <code>#</code> are ignored.</li>
<li>Standard glob patterns work, and will be applied recursively throughout the entire working tree. Example:
<ul>
<li><code>*.log</code> ignores all files that end with <code>log</code> recursively</li>
<li><code>doc/*.txt</code> ignores all <code>.txt</code> files under <code>doc</code></li>
<li><code>doc/**/*.pdf</code> igores all pdf files in the <code>doc</code> directory and all its subdirectoris</li>
</ul></li>
<li>We can start patterns with a forward slash (/) to avoid recursivity. Example: <code>/TODO</code> ignores TODO in the current directory.</li>
<li>You can end patterns with a forward slash (/) to specify a directory. Example: <code>build/</code> ignores all files under <code>build</code> in all directories.</li>
<li>You can negate a pattern by starting it with an exclamation point (!). Example: <code>!test.log</code> tracks <code>test.log</code></li>
</ul>
</section>
<section id="general" class="level2">
<h2 class="anchored" data-anchor-id="general">General</h2>
<ul>
<li><p><code>git rm</code> would remove a file from working tree and stage it. If we ever staged files by mistake, we could run <code>git rm --cached filename</code> to remove it from staging area and keep it on hard drive especially if we don’t want Git to track it.</p></li>
<li><p><code>git mv</code> both change the file name and stage it</p></li>
<li><p><code>git reflog</code> remember all actions taken in a repository (even intermediate steps such as creating branches, clone, pull, etc.) and not just commits. It is local to your copy of the respository and others who have the same copy of the repoository would have their own version of reflog. It also starts empty after we clone the repository. Therefore, it is more like <code>shell</code> history. We can always get back to some state.</p>
<ul>
<li><code>git reflog show hash_value</code> will show all the actions happened for the hash.</li>
</ul></li>
<li><p><code>git diff</code> to see the changes in the working tree compared to the index</p></li>
<li><p><code>git diff --cached</code> to see the changes compared to the last commit</p></li>
<li><p><code>git difftool</code> shows the changes in external tools such as <em>vimdiff</em></p></li>
<li><p><code>git add -i</code> for interactive staging to control which files to stage and which parts of the files (patches) to stage all interactively. This is very helpful if we have done a lot of work on many files without staging anything. We can <code>add/checkout/restore/stash</code> patches (parts of files) by adding <code>--patch</code> or <code>-p</code> flag to their corresponding git command.</p></li>
<li><p><code>git commit -m "test"</code> When we commit, It involves at least a change to one blob. This will lead to a creation of new tree with current state of the code that reflect the changes. Git then creates commit object that will point to the new tree. Finally, it will update the current branch to point to the newly created branch.</p></li>
<li><p><code>git merge --ff-only branch-name</code> This kind of merge creates no objects, It just updates the current branch to a different commit.</p></li>
<li><p><code>git merge branch-name</code> In contrast to the fast forward merge, Git creates a new tree by trying its best to combine two divergent branches. It then creates a new commit that point to the newly created tree and the parent would be the two commits; latest commit from each branch. This is what <em>merging using pull requests</em> does on Github. It may not be preferable because the actual code changes during merge when Git tries to combine all of them and we may end up with conflict.</p></li>
</ul>
</section>
<section id="stashing" class="level2">
<h2 class="anchored" data-anchor-id="stashing">Stashing</h2>
<p>It is very helpful when we staged some work and/or have modified tracked files and want to jump to different branch to work on something else. By default, Git stashes only modified and staged tracked files but not untracked files. We can add <code>-u</code> to add also untracked files.</p>
<ul>
<li>We can run <code>git stash</code> to stash the work</li>
<li><code>git stash list</code> to list all the stashes</li>
<li><code>git stash apply</code> to apply last stash OR <code>git stash apply stashname</code>. This keeps the stash on the stack</li>
<li><code>git stash drop</code> to remove a stash</li>
<li><code>git stash pop</code> to apply and remove last stash in one command</li>
</ul>
<p>We can apply stashes from one branch on another branches.</p>
<p>To avoid issues/merge conflicts when trying to apply stashes, it may be helpful to create new branch and apply stash in the new branch. This can be done by <code>git stash branch newbranchname</code>. This will create new branch, checkout last commit you were on, apply stash, and then drop the stash.</p>
</section>
<section id="managing-history" class="level2">
<h2 class="anchored" data-anchor-id="managing-history">Managing History</h2>
<ul>
<li><code>git log</code> has all the information we need to the repo’s history.
<ul>
<li><code>git log --all --decorate --graph --oneline</code> is great to get an overview and see the divergence of branches</li>
<li><code>git log -n</code> will limit the log to the top n</li>
<li><code>git log --oneline file</code> is useful to get an overview of the log of one file</li>
<li><code>git log --pretty=format:'%C(yellow)%h%C(reset) - %an [%C(green)%ar%C(reset)] %s</code> to change the format of the log output</li>
<li><code>git log -E -i --grep regexp</code> will do extended search the logs for the regexp phrase; case insensitive</li>
<li><code>git log -S term</code> will search for changes related to that term in the code base (addition/deletion). Check this <a href="https://thoughtbot.com/blog/code-sleuthing-with-git">post</a></li>
<li><code>git log -G regexp</code> will search for changes related to the regexp in the code base; but looks for patterns not literal string.</li>
</ul></li>
<li><code>git show commit</code> will show everything that happened with that commit including <strong>diff</strong></li>
<li><code>git blame file</code> is useful to know who did what to the file and when especially if we want to trace who introduced some bug/logic to the codebase. Use <code>-L</code> to restrict to specific lines. Use <code>-C</code> to detect if block of lines were copied from other files that were in the same commit.</li>
</ul>
</section>
<section id="bisect" class="level2">
<h2 class="anchored" data-anchor-id="bisect">Bisect</h2>
<p>Git Bisect is useful to trace when a bug is introduced to get the commit that introduced the bug especially if the commit was pretty far in the history. It does binary search between the commit that you believe was good (no bug) and the current commit or any commit that we know has the bug. Below are a typical workflow:</p>
<ul>
<li><code>git bisect start</code> to start the binary search</li>
<li><code>git bisect bad</code> which means current <code>HEAD</code> is the bad commit which would be last commit in the range of commits of the binary search</li>
<li><code>git bisect good commit</code> which tells Git that the provided commit didn’t have the bug and would be the first commit in the range of commits of the binary search</li>
<li>We can use the three commands in one command <code>git bisect start badcommit goodcommit</code></li>
<li>From here, we interactively run either <code>git bisect good</code> to tell Git the given commit is good so it does binary search from next commit to the last commit OR <code>git bisect bad</code> to tell Git that the given commit is bad and the next binary search stops at the commit before it. We keep doing this until we arrive at the commit that introduced the bug.</li>
</ul>
<p>We can also use a script that runs tests for us to check whether a commit is good or bad and automate the whole process:</p>
<ul>
<li><code>git bisect start badcommit goodcommit</code></li>
<li><code>git bisect run test-script.sh</code> OR <code>git bisect run make rule</code> OR <code>git bisect run pytest</code>. For each commit, <code>git bisect</code> runs the script or command on the checked out commit. If it returns 0 -&gt; good; otherwise, bad.</li>
</ul>
</section>
<section id="submodules" class="level2">
<h2 class="anchored" data-anchor-id="submodules">Submodules</h2>
<p>Git submodules are Git repositories inside Git repository that allows us to track them and keep commit histories separate. Each submodule would be in different directory inside the project git repository.</p>
<ul>
<li>We can add submodule by <code>git submodule add URL</code>. This will create a directory with the name of the Git repository (we can have different names using <code>git submodule add URL name</code>). If we run <code>git status</code>, we see that Git added the directory as special type of file as well as add a file named <code>.gitmodules</code> that has the <em>path</em> and the <em>URL</em> for each submodule. We need to commit those two files to include them in our main project history.</li>
<li>If we clone a project that has submodules, we can either pass <code>--recurse-submodules</code> to initialize and pull all contents of all submodules OR go in each submodule directory and run <code>git submodule update --init</code> (add <code>--recursive</code> if there are any nested submodules.</li>
<li>To pull out changes made to submodules, run <code>git submodule update --remote submodule_name</code></li>
<li><code>git diff --submodule</code> to get a nice diff for submodules</li>
</ul>
</section>
<section id="hooks" class="level2">
<h2 class="anchored" data-anchor-id="hooks">Hooks</h2>
<p>Git <a href="https://thoughtbot.com/blog/use-git-hooks-to-automate-annoying-tasks">hooks</a> are scripts that can either be client-side hooks that run for operations such as committing/merging or system-side hooks that run on network operations such as receiving pushed commits. All hooks are stored in <code>.git/hooks</code> directory. Git prepopulates any new Git repository with example hooks that end with <code>.sample</code>. To use such hooks, remove the extrension. We can write hooks in many languages such as Python but they have to be executable and can’t have any extension. Also, client-side hooks aren’t copied when the repository is cloned.</p>
<p>Below are the most common client-side hooks:</p>
<ul>
<li><code>pre-commit</code>: Runs before we type the commit message and abort if the return code is not zero. This can be used to run tests, check code style, check for documentation or whitespaces, etc.</li>
<li><code>prepare-commit-msg</code>: Runs before the commit message editor but after the default message is created.</li>
<li><code>commit-msg</code>: Typically used to check if a commit message conforms to some predefined patterns.</li>
<li><code>post-commit</code>: Runs after the commit proccess is completed.</li>
</ul>
<p>There are other client-side hooks such as <code>pre-rebase</code>, <code>pre-merge</code>, <code>post-merge</code>, etc.</p>
<p>Below are the most common system-side hooks:</p>
<ul>
<li><code>pre-receive</code>: Runs when handling a push from client. It can be used to check for things such as rejecting non-fast-forwards or access control.</li>
<li><code>update</code>: Similar to <code>pre-receive</code> but runs once for each branch the pusher is trying to update.</li>
<li><code>post-receive</code>: Runs after the entire push process is completed. It can be used to notify users or update services.</li>
</ul>
</section>
<section id="resetting" class="level2">
<h2 class="anchored" data-anchor-id="resetting">Resetting</h2>
<p><code>git reset HEAD|commit</code> command allows us to:</p>
<ul>
<li>Move what the branch <code>HEAD</code> points to (stops if <code>--soft</code> and everything will be in the staging).</li>
<li>Make the index look like HEAD (stops here if not <code>--hard</code>)</li>
<li>Make the working directory look like the index</li>
</ul>
<p>If we provide a path such as <code>git reset filepath</code>, it is a shorthand for <code>git reset --mixed HEAD filepath</code> and does the following:</p>
<ul>
<li>Move what the branch <code>HEAD</code> points to (skipped)</li>
<li>Make the index look like <code>HEAD</code>; i.e.&nbsp;has the effect of unstaging the file</li>
</ul>
<p>If we run <code>git reset commit -- filepath</code>, it will act as if we reverted the content of the file to what was in the commit and then ran <code>git add</code> on the file without changing working directory. The <code>HEAD</code> and the working directory would have the same version of the file. Therefore, running <code>git commit</code> will commit the changes back to what was in the commit leaving both index file and <code>HEAD</code> point to the same changes.</p>
<p><code>git checkout</code> without paths is similar to <code>git reset</code> with two differences:</p>
<ul>
<li><code>reset</code> moves the branch <code>HEAD</code> points to while <code>checkout</code> moves <code>HEAD</code> itself. For example, <code>git checkout branch</code> would change what <code>HEAD</code> is pointing to while <code>git reset commit</code> would change what branch points to.</li>
<li><code>checkout</code> is working-directory safe where it tries to do a trivial merge but <code>reset --hard</code> will overwrite working-directory.</li>
</ul>
<p><code>git checkout filepath</code> is similar to `git reset –hard filepath -&gt; overwrite working directory.</p>
</section>
<section id="inspecting-commit-ranges" class="level2">
<h2 class="anchored" data-anchor-id="inspecting-commit-ranges">Inspecting Commit Ranges</h2>
<ul>
<li><code>^</code> refers to the parent. <code>HEAD^</code> means the parent of last commit in the current branch.</li>
<li><code>~</code> refers to the first parent. <code>HEAD~</code> means the first parent of last commit in the current branch. It will be different than <code>^</code> in the case a commit has multiple parents as is the case of merge commits that have multiple parents.</li>
<li><code>HEAD~5</code> is equivalent in some sense to <code>HEAD^^^^^</code>.</li>
<li>Double dots (<code>..</code>): If we want to see the commits that are reachable from target branch (commit) but not the source branch (commit), we use <code>git log sourcecommit..targetcommit</code>.</li>
<li>Triple dots (<code>...</code>): If we want to see the commits that are reachable by either of the branches (commits) but not from both of them, we use <code>git log sourcecommit...targetcommit</code>. This will return commits unique to sourcecommit and targetcommit but not common commit.</li>
<li>Multiple points: If we want to see the commits for multiple points such as <code>git log refA refB ^refC</code> which means commits reachable from refA and refB but not C. Therefore:
<ul>
<li><code>git log refA..refB</code> is equivalent to <code>git log refB ^refA</code></li>
</ul></li>
</ul>
</section>
<section id="grep" class="level2">
<h2 class="anchored" data-anchor-id="grep">Grep</h2>
<p>Git <code>grep</code> allows us to search for a pattern in working directory, index, and committed tree. We can also search in older versions of the code such as using old tags/commits, which <code>grep/ack</code> tools can’t.</p>
<p>The most useful flags to use with grep is <code>git grep -n -p --break --heading pattern optional_path optionalcommit</code>.</p>
</section>
<section id="undoing" class="level2">
<h2 class="anchored" data-anchor-id="undoing">Undoing</h2>
<p><strong>Commits are immutable. This means that even though we can fix some stuff related to commits, we can’t change the commits themselves. They will still be in the history.</strong> Therefore, anything that is committed in Git can almost always be recovered. Even commits that were on branches that were deleted or commits that were overwritten with an –amend commit can be recovered. However, anything you lose that was never committed is likely never to be seen again.</p>
<ul>
<li><code>git commit --amend</code> will open an editor to write a new commit message to the already committed changes.
<ul>
<li><code>git commit --amend -m "message"</code> is a shorthand</li>
<li><code>git commit --amend --no-edit</code> will add new files to the last commit; in case we forgot to add some files to that belong to the same commit</li>
</ul></li>
<li><code>git reset HEAD file</code> OR <code>git restore --staged file</code> will undo the staging of the file. This is helpful if we staged a file and then we need to change some things before committing.</li>
<li><code>get checkout -- file</code> OR <code>git restore file</code> will delete all the changes made to a file. We will never be able to get back the deleted changes.</li>
<li><code>get reset --soft HEAD~2</code> This will remove the commits from the history and point HEAD to its grand parent. <code>--soft</code> here means to keep the changes in the current working directory and index file. Therefore, running <code>git commit</code> would commit the latest changes and make grand parent as the parent of changes (<strong>Squashing Commits</strong>).</li>
<li>To cancel the commit while writing the message, we can exit vim with <code>:cquit</code> which exits vim with error and git will get that error -&gt; won’t proceed in creating the commit.</li>
</ul>
</section>
<section id="rebasing-history" class="level2">
<h2 class="anchored" data-anchor-id="rebasing-history">Rebasing History</h2>
<ul>
<li><code>git add file</code> or <code>git add --all</code> or <code>git add directory</code>. This will add all changes made to a specific file/directory.</li>
<li><code>git add --patch</code> Allows us to cherry pick the changes that we want to stage. This is useful if we want to split the changes we made to a specific file into different commits. When we run the command, we will interactively choose what we want to stage using shortcuts.</li>
<li><code>git diff/log HEAD..HEAD~2</code> will give us the diff/log for the range between two commits in history. We can either choose hash_values of commits or their references such as HEAD/master.</li>
<li><code>git reset --hard HEAD~1</code> will make HEAD point to its parent and remove last commit from log history. Note that the last commit is not completely removed, we see that with <code>git reflog</code>.</li>
<li><code>git cherry-pick origin/master..master</code> will replay the commits with this range in another branch. This is useful when we commit to the wrong branch and we want to make those commits in another branch. We can use this command after we checkout the correct branch and run the above command. To remove the commits from the branch we first commit, we can use <code>git reset --hard</code> (even though the removed commits are still in our history).</li>
<li><code>git rebase master</code> We want to take the work we’ve done on our feature branch, and reapply it as if it was done on top of the additional commits in our master branch. When performing the rebase, Git finds the commits unique to our branch and computes the diff off the changes they introduced, then moves to the target branch, master in this case, and one by one applies the diffs, creating new commits reusing the commit messages from our branch. Once done, it updates our branch to point at the newest of these commits created by reapplying the diffs.</li>
<li>While we would never revise published history, specifically the master branch, we almost always revise our commits on feature branches before merging them in. We value a clean history, and the majority of the time, the commits in a feature branch contain many rounds of refactoring and PR reviews which we don’t want in the permanent history. Instead, we want the most direct and concise form of the history that fully captures the change we settled on in our feature branch after completing any refactoring or updates. Use <code>git rebase -i master</code> will allow us to do just that.
<ul>
<li>We can remove, reorder, squash, edit, and split commits using interactive rebase.</li>
<li>Git applies and rewrite the changed commits and all the commits that follow the changed ones.</li>
<li>It is highly recommended to not change history if you already pushed it to the remote server unless we’re working on feature branch and are doing it to clean up history before merging and close the pull request.</li>
<li>Reording is simply reordering the commits shown in the editor.</li>
<li>Be careful that the order of commits is reverse order. This means last commit will be last.</li>
</ul></li>
</ul>
</section>
<section id="packfiles" class="level2">
<h2 class="anchored" data-anchor-id="packfiles">Packfiles</h2>
<p>These are files that <em>Git</em> uses to combine files into single file to save space instead of having different versions of the same file taking all the space and only saves the original version with deltas where pack index file will have offsets that point to the object in the pack file. <em>Git</em> automatically runs this when we have too many loose files or when run <code>git gc</code> command or when we push to remote server.</p>
</section>
<section id="github-and-remotes" class="level2">
<h2 class="anchored" data-anchor-id="github-and-remotes">Github and Remotes</h2>
<ul>
<li><strong>Hub</strong> and Github CLI tool <strong>gh</strong> make it easy to interact with Github from the command line and integrate well with Git. Useful commands are <code>compare</code>, <code>browse</code>, and <code>pull-request</code>.</li>
<li>To share the code on a given branch using a URL that always point to the same code, we can press <code>y</code> to change the name of the branch with its hash that will always point to the same version of code even if we make changes to the branch. We can also select lines from the code file that will be highlighted when we open the URL.</li>
<li>If we are creating a new branch locally and want to have an upstream version for that branch:
<ul>
<li><code>git branch --remote origin/new-branch-name</code> will create upstream version of the branch so we can easily push.</li>
<li><code>git push -u origin new-branch-name</code> will create the new branch while pushing to Github</li>
<li>If we want the upstream name to have different name than the local branch name, <code>git push -u origin local-branch-name:upstream-branch-name</code></li>
</ul></li>
<li>If we want to delete a branch:
<ul>
<li>Locally: <code>git branch -d branch-name</code></li>
<li>Upstream: <code>git remote --delete branch-name</code></li>
</ul></li>
<li>We can force to push local branch to another existing upstream branch. This is risky and we may not need to use it <code>git push --force origin local-branch:upstream-branch</code></li>
</ul>
</section>
<section id="typical-workflow" class="level2">
<h2 class="anchored" data-anchor-id="typical-workflow">Typical Workflow</h2>
<ul>
<li>Always start by creating new branch for new features. Almost always strive to not commit directly to master branch even for small changes. The workflow is:</li>
</ul>
<blockquote class="blockquote">
<p>create new branch <strong>-&gt;</strong> make small changes <strong>-&gt;</strong> create pull request <strong>-&gt;</strong> pass code reviews and other stuff like CI/CD <strong>-&gt;</strong> Rebase master into feature branch <strong>-&gt;</strong> Interactive rebase to squash all commits from feature branch into one commit message <strong>-&gt;</strong> Fast forward merge with master <strong>-&gt;</strong> push master <strong>-&gt;</strong> delete feature branch locally and on upstream.</p>
</blockquote>
<ul>
<li>Always commit small changes and don’t wait for large changes to commit. It will be harder to figure out what changes have been made and make it difficult for code reviewers to understand. We can always refine commits with interactive rebase.</li>
<li><strong>Pull Requests:</strong>
<ul>
<li>We first need to push the feature branch into Github using <code>git push -u origin feature-branch</code></li>
<li>We then have two choices to open PRs: Either through Github UI or though command line tools like <code>hub</code> and <code>gh</code>. The advantage of Github UI is that it lets you review the code one more time through compare view before submitting it.</li>
<li>Provide as much context as possible when drafting your PR description. Try to provide as much useful detail as you can. Answering the following questions is a great start:
<ul>
<li>Why is this change needed?</li>
<li>Were other solutions considered?</li>
<li>Were any assumptions made?</li>
</ul></li>
<li>For work that can’t be broken down into small changes, we can use Github Task lists that shows all the items that need to be worked on and the methodology so that people would know not to do in depth code reviews. So every time we push changes we mark items that were already done.</li>
<li>Code reviews resources:
<ul>
<li><a href="http://confreaks.tv/videos/railsconf2015-implementing-a-strong-code-review-culture">Derek Prior’s talk on Code Review Culture</a></li>
<li><a href="https://github.com/thoughtbot/guides/tree/master/code-review">thoughtbot guide to code review</a></li>
</ul></li>
<li>After getting the feedback from the team on the code reviews as well as the CI comments, we can incorporate the changes that team recommended. Then push the new commits to the feature branch and those will automatically be included in the PR.</li>
<li>We prefer a clean history built using fast-forward merges. In order to ensure this, before merging our PR we always pull master and rebase our feature branch onto master to ensure that our commits are ahead of master. One nice helper for this is the mup alias which checks out master, pulls, then checks back out our feature branch: <code>mup = !git checkout master &amp;&amp; git pull &amp;&amp; git checkout -</code>. Finally, <code>git rebase master</code>. If we’ve done any rebase, we need to force push changes to remote <code>git push -f</code></li>
<li>Once we’re ahead of master, we can perform an interactive rebase to revise our commits and craft our history. In particular, we can use this time to squash down cleanup and WIP commits, ensuring that each commit we keep is useful and has a solid commit message.</li>
<li>This is the time to ensure that we’ve captured as much context as possible in our commit message to describe the “why” of the change. Two great resources on this topic are:
<ul>
<li><a href="https://robots.thoughtbot.com/5-useful-tips-for-a-better-commit-message">Five Rules for A Good Git Commit Message</a></li>
<li><a href="http://rakeroutes.com/blog/deliberate-git">Stephen Ball’s Deliberate Git talk</a></li>
</ul></li>
<li>If we’ve performed any form of rebase, then we’ll have created new commits and will want to push those up to GitHub in order to get everything in sync. To do this we can force push (<code>git push -f</code>) our branch.</li>
<li>Final steps:
<ul>
<li>If we’ve force pushed after rebasing as described above, we should be all set, but never hurts to give one last git push just to confirm that our local and remote feature branches are in sync.</li>
<li>Merge fast-forward: <code>git co master</code> &amp; <code>git merge - --ff-only</code></li>
<li>Push master: Now that we’ve merged master, we can push it up to GitHub with git push. As a reminder, with a fast-forward merge we are simply moving our master branch pointer to point at our feature branches tip commit, not actually creating any new commits. This is one of the main benefits of using fast-forward merges, namely that all commits are created and can be reviewed on our feature branch before merging into master. With “Big Green Button on GitHub” merges and other non-fast-forward merges, the merge commit is created directly on master based on Git’s merging algorithm.</li>
<li>Delete local branch: <code>git branch -d decks-ordering</code></li>
<li>Delete remote branch: <code>git push origin --delete &lt;branchName&gt;</code>. We can also delete the branch via the GitHub PR page, and then git pull on master, letting the fetch prune setting automatically clean up our local reference to the remote branch.</li>
<li>Pull request auto closing. Assuming we’ve performed the steps outlined above, GitHub will have automatically closed the PR based on the fact that master now contains our branch’s commits.</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="configuration" class="level2">
<h2 class="anchored" data-anchor-id="configuration">Configuration</h2>
<p>Git looks for configurations in the following places:</p>
<ul>
<li>First look for/inside <code>/etc/gitconfig</code>. Any time we use <code>git config --system</code>, it reads/writes this file</li>
<li>Second look for/inside <code>~/.gitconfig</code> for each user. Any time we use <code>git config --global</code>, it reads/writes this file</li>
<li>Finaly look for/inside <code>.gitconfig</code> inside the Git directory. Any time we use <code>git config --local</code>, it reads/writes this file</li>
</ul>
<p><code>gitconfig</code> file is read automatically before any Git command is run. That turns out to be very handy as it means you never have to reload or experience out-of-sync commands. Additionally, git automatically writes to it when we run commands like git config –global alias.ga.</p>
<ul>
<li>The config file is split into sections such as <em>color, alias, core, push, etc.</em> For example:</li>
</ul>
<div class="sourceCode" id="cb58"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="ex">[push]</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>    <span class="ex">default</span> = upstream</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>is the same as <code>git config --global push.default upstream</code>.</p>
<p>Few useful configurations:</p>
<ul>
<li><code>push.default upstream</code> this instructs Git how to respond when you run git push with no arguments. With the upstream configuration, it will push the configured upstream tracking branch (set up with <code>git push -u</code>).</li>
<li><code>merge.ff only</code> this configuration tells Git to reject merges that are non-fastforward. With fast-forward merges, no new commits are created, but instead the merging branch (typically master) is only moved to point at the commits on the target branch (typically our feature branch).</li>
<li><code>fetch.prune true</code> this instructs Git to clear local references to remote branches which have been deleted when you pull.</li>
</ul>
<p>By default, we can only execute one git command when aliasing. To execute more than one command, we can start the command with <code>!</code> and then we can execute multiple shell commands using pipes, &amp;&amp;, and ||. For example, <code>!git checkout master &amp;&amp; git pull &amp;&amp; git checkout -</code>.</p>
<p><strong>Git subcommands</strong> allow us to write scripts in any language we want; not necessarily bash, and make Git executes it. The script subcommand has to be:</p>
<ul>
<li>On our <code>$PATH</code></li>
<li>Marked as executable</li>
<li>The file name has to be prefixed with git and then dash and then the name of the command. For example, <code>git-subcommand-name</code>. Actually, all git commands are files that share all those criteria such as <code>git-add</code>. Below is an example of subcommand:</li>
</ul>
<div class="sourceCode" id="cb59"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Small wrapper around git commit. Bare 'cm' will enter normal git commit</span></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a><span class="co"># editor, but with args it will do a direct `commit -m`</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">[[</span> <span class="va">$#</span> <span class="ot">&gt;</span> 0 <span class="kw">]];</span> <span class="cf">then</span></span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">git</span> commit <span class="at">-m</span> <span class="st">"</span><span class="va">$@</span><span class="st">"</span></span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span></span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">git</span> commit <span class="at">-v</span></span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a><span class="cf">fi</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="resources" class="level2">
<h2 class="anchored" data-anchor-id="resources">Resources</h2>
<ul>
<li><a href="http://gitready.com/">Git Ready</a>: Practical how-to pages on topics like “get a file from a specific revision.”</li>
<li><a href="https://progit.org/">Pro Git</a>: A great in-depth resource I find myself continually coming back to.</li>
<li><a href="https://github.com/pluralsight/git-internals-pdf">Git Internals</a>: A deep dive into the Git object model, with more detail and nuance than we could cover in the this course’s video on the topic</li>
<li><a href="https://github.com/thoughtbot/guides/tree/main/">Thoughtbot Guides</a></li>
<li><a href="https://cli.github.com/">Github CLI</a></li>
<li>Add this to Vim <code>autocmd Filetype gitcommit setlocal spell textwidth=72</code></li>
<li><a href="https://github.com/tpope/vim-fugitive">Fugitive Plugin</a>
<ul>
<li><a href="http://vimcasts.org/blog/2011/05/the-fugitive-series/">five part Fugitive series on Vimcasts</a></li>
</ul></li>
<li><a href="https://github.com/christoomey/vim-conflicted">Conflicted</a> Optimizing Fugitive for merge and rebase conflicts</li>
</ul>


</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script>
document.addEventListener("DOMContentLoaded", function() {
    // Only add citation to post pages (not index, about, etc.)
    if (window.location.pathname.includes('/posts/')) {
        // Find the main content area
        const mainContent = document.querySelector('main');
        if (mainContent) {
            // Get metadata from the page
            const titleElement = document.querySelector('h1.title');
            const dateElement = document.querySelector('.date');
            
            const title = titleElement ? titleElement.textContent : 'Untitled';
            const dateText = dateElement ? dateElement.textContent : new Date().toLocaleDateString();
            
            // Get the current post URL - construct proper GitHub Pages URL
            const postPath = window.location.pathname;
            const postUrl = 'https://imaddabbura.github.io' + postPath;
            
            // Parse date and format it
            const date = new Date(dateText);
            const monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun",
                               "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
            const formattedDate = monthNames[date.getMonth()] + " " + date.getFullYear();
            const year = date.getFullYear();
            const month = monthNames[date.getMonth()];
            
            // Create citation HTML
            const citationHTML = '<hr>' +
                '<div class="callout callout-style-default callout-note no-icon callout-titled">' +
                    '<div class="callout-header d-flex align-content-center">' +
                        '<div class="callout-icon-container">' +
                            '<i class="callout-icon no-icon"></i>' +
                        '</div>' +
                        '<div class="callout-title-container flex-fill">' +
                            'How to Cite This Post' +
                        '</div>' +
                    '</div>' +
                    '<div class="callout-body-container callout-body">' +
                        '<p>If you found this useful, please cite this write-up as:</p>' +
                        '<blockquote class="blockquote">' +
                            '<p>Dabbura, Imad. (' + formattedDate + '). ' + title + '. https://imaddabbura.github.io. ' + postUrl + '.</p>' +
                        '</blockquote>' +
                        '<p>or</p>' +
                        '<div class="sourceCode"><pre class="sourceCode bibtex code-with-copy"><code class="sourceCode bibtex">@article{dabbura' + year + ',\n' +
                        '  title   = {' + title + '},\n' +
                        '  author  = {Dabbura, Imad},\n' +
                        '  journal = {https://imaddabbura.github.io},\n' +
                        '  year    = {' + year + '},\n' +
                        '  month   = {' + month + '},\n' +
                        '  url     = {' + postUrl + '}\n' +
                        '}</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>' +
                    '</div>' +
                '</div>';
            
            // Insert citation at the end of main content, before closing tag
            mainContent.insertAdjacentHTML('beforeend', citationHTML);
        }
    }
});
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/imaddabbura\.github\.io\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="imaddabbura/imaddabbura.github.io" data-repo-id="R_kgDOIEwRMg" data-category="General" data-category-id="DIC_kwDOIEwRMs4CRprP" data-mapping="title" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script>
<input type="hidden" id="giscus-base-theme" value="light">
<input type="hidden" id="giscus-alt-theme" value="dark">
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Blog made with Quarto, by Imad Dabbura</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/imaddabbura/imaddabbura.github.io/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/imaddabbura/">
      <i class="bi bi-linkedin" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="mailto:imad.dabbura@hotmail.com">
      <i class="bi bi-envelope" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/imaddabbura">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/imadphd">
      <i class="bi bi-twitter" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>